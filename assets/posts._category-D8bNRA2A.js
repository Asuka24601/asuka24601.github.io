import{j as e,r as f,L as x,w as h}from"./chunk-JMJ3UQ3L-D8xUhVh8.js";import{s as p}from"./search-EH1VKQO4.js";import{T as u}from"./textJitter-CutdUL0c.js";import{C as j}from"./CRTOverlay-CMIxyTdG.js";import"./preload-helper-BXl3LOEh.js";import"./__manifest-LTtVKofP.js";function b(r){const t={children:new Map,files:[]};for(const n of r){let o=t;for(const c of n.prefix)o.children.has(c)||o.children.set(c,{children:new Map,files:[]}),o=o.children.get(c);o.files.push(n)}function s(n){const o=[],c=Array.from(n.children.entries()).sort((i,a)=>i[0].localeCompare(a[0]));for(const[i,a]of c)o.push({type:"dir",name:i,children:s(a)});const l=n.files.sort((i,a)=>(i.frontMatter.title||"").localeCompare(a.frontMatter.title||""));for(const i of l)o.push({type:"file",post:i});return o}return s(t)}function d(r){let t=0;for(const s of r)s.type==="dir"&&(t+=1+d(s.children));return t}const y=({item:r,prefix:t,isLast:s})=>{const[n,o]=f.useState(!0),c=s?"└── ":"├── ",l=t+(s?"    ":"│   ");return r.type==="file"?e.jsx("div",{className:"flex flex-col",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("span",{className:"text-base-content/50 font-mono whitespace-pre",children:[t,c]}),e.jsx(x,{to:"/posts/"+r.post.path,className:"hover:text-primary transition-colors hover:underline",children:r.post.frontMatter.title})]})}):e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs("span",{className:"text-base-content/50 font-mono whitespace-pre",children:[t,c]}),e.jsxs("button",{onClick:()=>o(!n),className:"text-secondary hover:text-secondary/80 flex cursor-pointer items-center font-bold transition-colors",type:"button",children:[r.name,e.jsx("span",{className:"ml-2 font-mono text-xs opacity-50",children:n?"[-]":"[+]"})]})]}),n&&e.jsx(m,{items:r.children,prefix:l})]})},m=({items:r,prefix:t=""})=>e.jsx(e.Fragment,{children:r.map((s,n)=>e.jsx(y,{item:s,prefix:t,isLast:n===r.length-1},s.type==="dir"?s.name:s.post.slug))});function g({category:r,posts:t}){const s=b(t),n=d(s),o=t.length,c=r.replace(/[/+]$/gm,"").split("/");return e.jsx(e.Fragment,{children:e.jsx("div",{className:"mx-auto min-h-screen w-full",children:e.jsx("div",{className:"border-terminal mx-auto grid min-h-[inherit] max-w-6xl overflow-visible! border-none! p-4 lg:p-6",children:e.jsxs("div",{className:"min-h-full w-full pt-(--navbar-height) transition-transform duration-500",children:[e.jsx(j,{}),e.jsxs(u,{className:"border-neutral! bg-base-200 relative min-h-full overflow-hidden border-4 border-double",children:[e.jsxs("h1",{className:"uppercase",children:["~/posts/",c.map(l=>e.jsxs("span",{children:[l,"/"]},l))]}),t.length>0?e.jsxs("div",{className:"text-lg",children:[e.jsx("div",{className:"text-secondary mb-2 font-bold",children:"."}),e.jsx(m,{items:s}),e.jsxs("div",{className:"text-base-content/50 mt-2 font-mono text-base",children:[e.jsx("br",{}),n," director",n!==1?"ies":"y",", ",o," file",o!==1?"s":""]})]}):e.jsx("div",{className:"text-base-content/30 col-span-full flex flex-col items-center justify-center border border-dashed border-white/5 py-16",children:e.jsx("div",{className:"mb-4 text-6xl font-black opacity-10",children:"404"})})]})]})})})})}function F({params:r}){const{category:t}=r;return{posts:p.search("",[],[t]),category:location.pathname.substring(7)}}const I=h(function({loaderData:t}){const{posts:s,category:n}=t;return e.jsx(e.Fragment,{children:e.jsx(g,{posts:s,category:n})})});export{F as clientLoader,I as default};
