import{r as i,j as E}from"./chunk-JMJ3UQ3L-D8xUhVh8.js";import{u as I,a as L}from"./store-Cku1Yt54.js";const c="/blog/assets/errorImg-DnU4xuem.webp",j=({placeholderSrc:o,src:s,className:d,alt:v,lazy:a=!0,useLightBox:m=!1,draggable:b=!0})=>{const[x,u]=i.useState(o||s||c),[l,n]=i.useState(!0),f=i.useRef(null),S=I(e=>e.setLightboxSrc),p=I(e=>e.setIsImageLoading),w=L(e=>e.setNavShow);return i.useEffect(()=>{if(u(o||s||c),n(!0),!s){const t=setTimeout(()=>{n(!1)},500);return()=>clearTimeout(t)}let e,r=!0;const g=()=>{const t=new Image;t.src=s,t.onload=()=>{r&&(u(s),n(!1))},t.onerror=()=>{r&&(u(o||c),n(!1))}};return a&&typeof IntersectionObserver<"u"?(e=new IntersectionObserver(t=>{t.forEach(N=>{N.isIntersecting&&(g(),e.disconnect())})}),f.current&&e.observe(f.current)):g(),()=>{r=!1,e&&e.disconnect()}},[s,o,a]),E.jsx("img",{ref:f,decoding:"async",alt:v||"img",className:(l?"skeleton ":"")+(m?" cursor-zoom-in ":"")+" w-full "+(d||""),onClick:m?e=>{const r=e.target;r.tagName==="IMG"&&(e.preventDefault(),S(r.src),p(!0),w(!1))}:void 0,src:x,loading:a?"lazy":"eager",style:{filter:l?"blur(10px)":"none",transition:"filter 0.5s linear"},draggable:b})};export{j as P};
