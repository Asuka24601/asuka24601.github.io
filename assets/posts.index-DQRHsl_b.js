import{w as j,u as N,r as s,j as e,N as y}from"./chunk-JMJ3UQ3L-D8xUhVh8.js";import{t as u}from"./utils-7O0HEEsp.js";import{P as w}from"./progressiveImage-YowF13dN.js";import{R as T}from"./__manifest-LTtVKofP.js";import{A as E}from"./tags-DTx86MpR.js";import{C as _}from"./CRTOverlay-CMIxyTdG.js";import{T as A}from"./textJitter-CutdUL0c.js";import{s as S}from"./search-EH1VKQO4.js";import{T as k}from"./tagsComponent-CHronNRZ.js";import"./store-YdK40I-_.js";import"./preload-helper-BXl3LOEh.js";const M=()=>{const[o,l]=s.useState(0);s.useEffect(()=>{const p=setInterval(()=>{l(c=>c>=100?0:c+5)},50);return()=>clearInterval(p)},[]);const a=24,d=Math.floor(o/100*a),r=a-d,x="|".repeat(d)+".".repeat(r);return e.jsxs("div",{className:"text-base-content/50 flex flex-col items-center gap-1 text-xs",children:[e.jsx("div",{className:"animate-pulse text-[10px] tracking-widest uppercase",children:">> BUFFERING_DATA_STREAM"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-primary",children:["[",x,"]"]}),e.jsxs("span",{className:"text-base-content/70 w-8 text-right",children:[o,"%"]})]})]})},{generatedAt:C}=T,R=E.tags.sort((o,l)=>o.count-l.count).map(o=>o.name),Q=j(function(){const l=N(),[a,d]=s.useState(""),[r,x]=s.useState([]),[p,c]=s.useState(1),g=10,b=s.useRef(null),i=s.useMemo(()=>S.search(a,r),[a,r]);s.useEffect(()=>{c(1)},[a,r]);const h=s.useMemo(()=>i.slice(0,p*g),[i,p]),f=h.length<i.length;return s.useEffect(()=>{const t=new IntersectionObserver(n=>{n[0].isIntersecting&&f&&c(m=>m+1)},{threshold:.1});return b.current&&t.observe(b.current),()=>t.disconnect()},[f]),s.useEffect(()=>{l.state==="loading"&&window.scrollTo({top:0,behavior:"instant"})},[l.state]),e.jsx("div",{className:"mx-auto w-full max-w-6xl pt-(--navbar-height) text-sm",children:e.jsxs("div",{className:"border-terminal transition-all duration-500",style:{border:"none",background:"none",padding:"0"},children:[e.jsx(_,{}),e.jsx(A,{children:e.jsxs("div",{className:"border-neutral bg-base-200 relative flex flex-col overflow-hidden border-4 border-double",children:[e.jsxs("div",{className:"border-neutral/30 bg-base-200/20 flex items-end justify-between border-b-2 border-dashed p-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-base-content mb-1 text-[10px] font-bold tracking-widest uppercase opacity-50 before:content-['\\/\\/_DATABASE_ACCESS']"}),e.jsxs("div",{className:"text-primary text-xl font-black tracking-widest break-all uppercase after:animate-pulse after:content-['_\\_']",children:[e.jsx("span",{className:"text-base-content/50 mr-2",children:">"}),"SELECT * FROM POSTS",a&&e.jsx("span",{className:"text-secondary",children:` WHERE CONTENT LIKE '%${a}%'`}),r.length>0&&e.jsx("span",{className:"text-warning",children:` ${a?"AND":"WHERE"} TAGS IN [${r.join(",")}]`})]})]}),e.jsxs("div",{className:"hidden text-right sm:block",children:[e.jsx("div",{className:"text-base-content text-[10px] font-bold tracking-widest uppercase opacity-50 before:content-['LAST\\_UPDATE']",children:" "}),e.jsx("div",{className:"text-warning text-xs",children:u(C).dateTime})]})]}),e.jsxs("div",{className:"border-neutral/10 bg-base-content/5 border-b border-dashed p-4 text-xs backdrop-blur-sm",children:[e.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"text-secondary font-bold whitespace-nowrap",children:">> QUERY_INPUT:"}),e.jsx("input",{type:"text",value:a,onChange:t=>d(t.target.value),className:"border-neutral/30 focus:border-neutral text-base-content placeholder-base-content/50 w-full border-b bg-transparent px-2 py-1 focus:outline-none",placeholder:"输入关键词搜索...",autoComplete:"off"})]}),e.jsxs("div",{className:"flex flex-wrap items-start gap-2",children:[e.jsx("span",{className:"text-warning mt-1 font-bold whitespace-nowrap",children:">> FILTER_TAGS:"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[R.map(t=>{const n=r.includes(t);return e.jsxs("button",{onClick:()=>{x(m=>n?m.filter(v=>v!==t):[...m,t])},className:`border px-2 py-0.5 text-[10px] transition-all duration-300 ${n?"border-secondary bg-secondary text-black shadow-[0_0_10px_var(--color-secondary)]":"hover:border-secondary hover:text-secondary text-base-content/60 border-neutral/20"}`,children:[n?"[x]":"[ ]"," #",t]},t)}),r.length>0&&e.jsx("button",{onClick:()=>x([]),className:"border border-red-500/50 px-2 py-0.5 text-[10px] text-red-400 transition-colors hover:bg-red-500/10",children:"[CLEAR_TAGS]"})]})]})]}),e.jsxs("div",{className:"flex min-h-[50vh] flex-col",children:[i.length===0&&e.jsx("div",{className:"text-base-content/30 flex h-32 items-center justify-center",children:e.jsx("span",{className:"tracking-widest uppercase",children:"< NO_DATA_FOUND />"})}),h.map(t=>e.jsxs("div",{className:"group border-neutral/10 hover:bg-primary/5 relative border-b border-dashed p-4 transition-all",children:[e.jsx("div",{className:"bg-primary absolute top-0 bottom-0 left-0 w-1 opacity-0 transition-opacity group-hover:opacity-100"}),e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"flex min-w-0 flex-1 flex-col gap-2",children:[e.jsxs("div",{className:"text-base-content/50 flex items-center gap-3 text-[10px]",children:[e.jsxs("span",{className:"text-primary",children:["[",u(t.frontMatter.date).date,"]"]}),e.jsx("span",{className:"bg-neutral/20 h-3 w-px"}),e.jsx("span",{className:"uppercase before:content-['AUTH:_']",children:t.frontMatter.author})]}),e.jsx("h2",{className:"group-hover:text-primary text-base-content text-xl font-bold tracking-wide transition-colors",children:e.jsxs(y,{to:t.path,className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-primary/50 -ml-4 opacity-0 transition-all duration-300 group-hover:ml-0 group-hover:opacity-100",children:">"}),t.frontMatter.title]})}),e.jsx("p",{className:"text-base-content/70 line-clamp-2 text-xs leading-relaxed",children:t.frontMatter.description}),e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:t.frontMatter.tags?.map(n=>e.jsx(k,{tag:{name:n}},n))})]}),t.frontMatter.cover&&e.jsx("div",{className:"hidden w-32 shrink-0 sm:block",children:e.jsx("div",{className:"group-hover:border-neutral/30 bg-base-300/40 border border-white/10 p-1 transition-colors",children:e.jsxs("div",{className:"relative aspect-video w-full overflow-hidden grayscale transition-all duration-500 group-hover:grayscale-0",children:[e.jsx(w,{src:t.frontMatter.cover,alt:t.frontMatter.title,className:"h-full w-full object-cover"}),e.jsx("div",{className:"pointer-events-none absolute inset-0 bg-[linear-gradient(rgba(18,16,16,0)_50%,rgba(0,0,0,0.25)_50%),linear-gradient(90deg,rgba(255,0,0,0.06),rgba(0,255,0,0.02),rgba(0,0,255,0.06))] bg-size-[100%_2px,2px_100%] opacity-20"})]})})})]})]},t.frontMatter.title)),f&&e.jsx("div",{ref:b,className:"flex justify-center p-8",children:e.jsx(M,{})})]}),e.jsxs("div",{className:"border-neutral/30 text-base-content/40 bg-base-300/20 flex items-center justify-between border-t border-dashed p-2 px-4 text-[10px] uppercase",children:[e.jsxs("span",{className:"before:content-['LOADED:_']",children:[h.length," ",e.jsxs("span",{className:"opacity-50",children:["/ ",i.length]})]}),e.jsx("span",{className:"animate-pulse after:content-['\\_END\\_OF\\_STREAM']"})]})]})})]})})});export{Q as default};
